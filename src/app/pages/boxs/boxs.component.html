<div class="row animated fadeIn" *ngIf="!loading">
  <div class="col-12">
    <div class="card">
      <div class="card-body">
        <h3 class="card-title">{{'boxs.title' | translate}} (
          <small>{{ page?.totalElements}}</small>
          )
        </h3>
        <!--        <div class="btn-group float-right">-->
        <!--          <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"-->
        <!--                  aria-expanded="false" >-->

        <!--          </button>-->
        <!--          <div class="dropdown-menu">-->
        <!--            <a class="dropdown-item" [routerLink]="" (click)="onBoxAction(TYPEBOX.OPEN)">Iniciar Caja</a>-->
        <!--            <a class="dropdown-item" [routerLink]="" (click)="onBoxAction(TYPEBOX.CLOSE)">Cerrar Caja</a>-->
        <!--          </div>-->
        <!--        </div>-->
        <button type="button" class="btn btn-primary float-right mdi mdi-plus"
                (click)="onBoxAction(TYPEBOX.OPEN)"></button>

        <table class="table table-hover" *ngIf="boxs">
          <thead>
          <tr>
            <th>{{'table.boxs.dateOpen' | translate}}</th>
            <th>{{'table.boxs.cashOpen' | translate}}</th>
            <th>{{'table.boxs.dateClose' | translate}}</th>
            <th>{{'table.boxs.cashClose' | translate}}</th>
            <th>{{'table.boxs.cashDiff' | translate}}</th>
            <th>{{'table.status' | translate}}</th>
            <th>{{'table.accions' | translate}}</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let box of boxs" [ngClass]="box?.cashClose && (box?.cashClose - box?.cashOpen<0)?'table-danger':''">
            <td>{{ box?.dateOpen | date:'dd/MM/yyyy'}}</td>
            <td>{{ box?.cashOpen | currency}}</td>
            <td>{{ box?.dateClose | date:'dd/MM/yyyy'}}</td>
            <td>{{ box?.cashClose | currency}}</td>
            <td>{{ box?.cashClose - box?.cashOpen | currency}}</td>
            <td>
              <span class="label label-rounded"
                    [ngClass]="(box.open)? 'label-success':'label-danger'">
                {{(box.open) ? ('boxStatus.enabled'| translate) :('boxStatus.disabled' | translate)}}
              </span>
            <td></td>

          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<app-loading [loading]="loading"></app-loading>
<app-modal-container [modalTitle]="'boxs.openBox.titleModal'| translate" *ngIf="typeSelect" (clickClose)="closeModal()">
  <ng-container *ngIf="typeSelect === TYPEBOX.OPEN">
    <form class="form-horizontal form-material" [formGroup]="openForm" (ngSubmit)="createBox()">
      <div class="form-group">
        <span class="help">{{'boxs.openBox.textModal'| translate}}</span>
      </div>
      <div class="form-group m-t-10">
        <label class="col-md-6">{{'boxs.openBox.inputCash' | translate: "{param: '$'}"}}</label>
        <input class="form-control col-md-6" type="text" formControlName="cashInit">
        <div
          *ngIf="(openControls.cashInit.touched && openControls.cashInit.errors )||
          (openControls.cashInit.invalid && (openControls.cashInit.dirty || openControls.cashInit.touched))"
          class="error-label">
          <small *ngIf="openControls.cashInit.errors?.required">
            {{'generalValidations.required' | translate}}
          </small>
          <small *ngIf="openControls.cashInit.errors?.pattern">
            {{'generalValidations.pattern' | translate}}
          </small>

        </div>
      </div>
      <div class="form-group row button-group justify-content-between">
        <div class="col-md-5">
          <button type="button" class="btn waves-effect waves-light btn-block btn-red" (click)="closeModal()">Cancelar
          </button>
        </div>
        <div class="col-md-5">
          <button type="submit" class="btn waves-effect waves-light btn-block btn-success"
                  [disabled]="openControls.cashInit.invalid">Confirmar
          </button>
        </div>
      </div>
    </form>
  </ng-container>
  <ng-container *ngIf="typeSelect === TYPEBOX.CLOSE">
    <h1>test2</h1>
  </ng-container>
</app-modal-container>
